# sunub-spaceship

## 설계 의도 및 구조적 고려사항

### 1. 확장성과 유지보수성을 최우선으로 한 구조 설계

- **리소스 확장성:** 다양한 3D 모델, 텍스처, 환경맵 등 리소스가 지속적으로 추가될 것을 염두에 두고, `public/models`, `public/texture` 등 폴더 구조를 명확히 분리했습니다. Vite 설정에서 glb, hdr 등 다양한 에셋 타입을 자동으로 포함하도록 하여, 새로운 리소스 추가 시 빌드/배포 과정이 번거롭지 않도록 설계했습니다.
- **모듈화 및 도메인 분리:** `src/widgets`, `src/core`, `src/Inputs` 등 각 도메인별로 폴더를 분리하여 렌더링, 물리, 입력, UI, 모델 등 각 기능이 독립적으로 발전할 수 있도록 했습니다. 새로운 위젯, 컨트롤러, 모델 등이 손쉽게 추가/교체될 수 있도록 각 모듈은 최소한의 의존성만 갖도록 설계했습니다.

### 2. 입력 시스템의 유연성과 확장성

- **Pub/Sub(이벤트 기반) 아키텍처:** 사용자의 입력(키보드, 마우스 등)을 처리할 때 직접적인 함수 호출이 아닌, `EventEmitter` 기반의 pub/sub 구조를 도입했습니다. 이를 통해 입력 소스와 실제 동작(컨트롤러, 게임 로직 등)이 느슨하게 결합되어 새로운 입력 방식(예: 터치, 게임패드)이나 액션이 추가될 때 기존 코드를 수정하지 않고도 확장할 수 있습니다.
- **입력 매핑 및 프로세서 분리:** 입력값을 도메인 액션(비행, 회전 등)으로 매핑하는 `mappers`와 입력값을 가공하는 `processors`를 분리하여 다양한 입력 시나리오에 대응할 수 있도록 했습니다.

### 3. 의존성 주입(DI)과 서비스 레지스트리

- **Inversify 기반 DI:** 게임 컨텍스트, 서비스, 위젯 등 주요 객체는 Inversify를 활용한 의존성 주입 패턴으로 관리합니다. 이를 통해 테스트 용이성, 모듈 교체, 서비스 확장성이 크게 향상됩니다.
- **ServiceRegistry 패턴:** 공통 서비스(예: 물리, 렌더러, 입력 등)는 ServiceRegistry를 통해 등록/조회되며, 각 위젯/컨트롤러는 필요한 서비스만 의존하도록 설계했습니다.

### 4. 실시간 디버깅 및 파라미터 조정

- **Tweakpane 기반 UI:** 개발 및 디버깅 편의를 위해 Tweakpane을 활용, 실시간으로 파라미터(카메라, 물리, 조작 등)를 조정할 수 있는 UI를 제공합니다. 각 위젯/컨트롤러별로 디버그 패널을 쉽게 추가할 수 있도록 구조화된 디버그 모듈(`widgets/Debug/`, `widgets/Camera/debug/` 등)을 도입했습니다.

### 5. 3D/물리 엔진과의 느슨한 결합

- **Three.js, Rapier3D 추상화:** 3D 렌더링(Three.js)과 물리 엔진(Rapier3D)은 직접적인 엔진 API 호출이 아닌, 추상화 계층을 통해 사용합니다. 이를 통해 엔진 교체, 업그레이드, 멀티엔진 지원 등 미래 확장에 유연하게 대응할 수 있습니다.

### 6. 기타 고려사항

- **ES2022, TypeScript 5.x 표준:** 최신 언어 기능을 적극 활용하여 코드의 간결함과 안정성을 높였습니다.
- **폴더/파일 네이밍:** 도메인별 명확한 네이밍과 kebab-case 파일명으로 대규모 프로젝트로의 확장 시에도 구조 파악이 쉽도록 했습니다.

---

## 프로젝트 개요

**sunub-spaceship**은 포트폴리오 및 데모 목적의 체험형 3D 게임 페이지입니다. 사용자는 웹에서 우주선 조종 등 다양한 인터랙션을 체험할 수 있도록 설계되었습니다.

## 기술 스택

- **TypeScript** 5.x (ES2022)
- **Vite** 7.x
- **Three.js** 0.178.x
- **Rapier3D** (물리 엔진)
- **Tweakpane** (UI 패널)
- **Inversify** (DI)
- **reflect-metadata**, **stats-gl** 등

## 프로젝트 아키텍처

- 모듈화된 구조 (src/core, src/widgets, src/Inputs 등)
- DI(의존성 주입) 및 이벤트 기반 설계
- 3D 렌더링, 물리, 입력, UI, 모델 등 각 도메인별로 분리
- 주요 흐름: 입력 → 컨트롤러 → 게임 컨텍스트/서비스 → 렌더/물리/모델

## 시작하기 (Getting Started)

```sh
yarn install
yarn dev
# 빌드: yarn build
```

필수 조건: Node.js 18+, yarn 4.x

## 프로젝트 구조

- `src/` : 주요 소스 코드
  - `core/` : 게임 컨텍스트, 서비스 레지스트리 등
  - `widgets/` : 렌더러, 씬, 카메라, 컨트롤러, 모델 등
  - `Inputs/` : 입력 시스템, 매퍼, 프로세서
  - `utils/` : 공통 유틸리티
- `public/` : 정적 리소스 (HDR, 모델 등)
- `index.html`, `vite.config.ts`, `tsconfig.json` 등

## 주요 기능 (Key Features)

- Three.js 기반 3D 씬 및 우주선/플래닛 등 모델 렌더링
- Rapier3D를 활용한 물리 시뮬레이션
- 입력 매핑 및 컨트롤러(비행 등)
- Tweakpane 기반 실시간 파라미터 조정 UI
- 모듈화된 디버그/테스트 위젯

## 개발 워크플로우

- **브랜치 전략:** (명시적 설명 없음, 기본적으로 main/master + feature 브랜치 사용 추정)
- **개발 프로세스:** 명확한 명세/계획/작업 분리 (`.github/prompts/` 내 다양한 워크플로우/분석/계획 템플릿 참고)

## 코딩 컨벤션

- TypeScript 5.x, ES2022 표준
- PascalCase(클래스/타입), camelCase(변수/함수)
- kebab-case 파일명 권장
- 명확하고 유지보수성 높은 코드 지향

## 테스트

- (테스트 관련 명시적 코드/설정 없음, 추후 확장 가능)
- 유닛/통합 테스트 구조는 prompt 및 설계 문서 참고

## 기여 방법 (Contributing)

- 코드 예시 및 명확한 명세 기반 개발 권장
- `.github/prompts/` 및 copilot-instructions-blueprint-generator.prompt.md 참고
- PR/이슈 템플릿, 명확한 커밋 메시지 권장

## 라이선스

별도 LICENSE 파일 없음 (필요시 명시)
